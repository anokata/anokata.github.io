<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"></meta>
    <title>=^^= I&#10084;You</title>
</head>
    <link rel="stylesheet" href="main.css">
    <script src="main.js"></script>
    <script src="effects.js"></script>
<body class="colorscheme color1">
    <noscript><div><img src="https://mc.yandex.ru/watch/46652703" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->

<canvas id="can"></canvas>
<span style="color:#600000">=^^= I&#10084;You</span>

<script>
p = [0];
xy = [0,0];
center = 10;
centerx = 50;
centery = 50;
pixel = 1;
height = 5;
t = 0;
window.addEventListener("load", init);
function init() {
    var canva = document.getElementById("can");
    canva.style.zIndex = 1;
    canva.width = window.innerWidth;
    canva.height = window.innerHeight;
    var w = canva.width;
    var h = canva.height;
    setTimeout(drawAll, 50);
    console.log("point");
}
function clear() {
    var canva = document.getElementById("can");
    var ctx = canva.getContext("2d");
    ctx.fillStyle="rgba(0,0,0,1)";
    ctx.fillRect(0,0,canva.width, canva.height);
}
function drawAll() {
    clear();
    //draw();
    drawxy();
    t += Math.PI / 32;
    setTimeout(drawAll, 20);
}
function draw() {
    var canva = document.getElementById("can");
    var ctx = canva.getContext("2d");
    ctx.fillStyle="rgba(255,255,255, 0.5)";
    for (var i = 0; i < p.length; i++) {
        var point = p[i];
        ctx.fillStyle="rgba(255,255,255, " + ((p.length-i)/p.length) + ")";
        ctx.fillRect(center+i*pixel,point*pixel,pixel,pixel);
    }
    ctx.fillStyle="rgba(255,255,255, 1.0)";
    ctx.fillRect(center,p[0]*pixel,pixel,pixel);
    window.p.unshift(next());
    //console.log(p);
    //if (p.length < 50)
    if (p.length > 20)
        p.pop();
}

function next() {
    var next = Math.sin(t) * height + height;
    return Math.round(next);
}

function card() {
    var a = 10;
    var x = a*2*Math.cos(t) - a*Math.cos(2*t);
    var y = a*2*Math.sin(t) - a*Math.sin(2*t);
    return [x,y]
}

function drawxy() {
    var canva = document.getElementById("can");
    var ctx = canva.getContext("2d");
    ctx.fillStyle="rgba(255,155,155, 0.5)";
    for (var i = 0; i < xy.length; i++) {
        var point = xy[i];
        ctx.fillStyle="rgba(255,105,105, " + ((xy.length-i)/xy.length) + ")";
        ctx.fillRect(centerx+pixel*point[1], centery-pixel*point[0], pixel, pixel);
    }
    window.xy.unshift(card());
    //console.log(xy);
    if (xy.length > 200)
        xy.pop();
    ctx.font = "20px Arial";
    ctx.fillStyle="rgba(255,105,105, 1)";
    ctx.fillText("=^^= I‚ù§You",10,30);
}
</script>

</body>
</html>
